<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Cat or Dog Predictor</title>
    <style>
      /* General layout */
      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background-color: #f5f5f7;
        margin: 0;
        padding: 20px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      h1 {
        color: #333;
        margin-bottom: 20px;
      }

      input[type="file"] {
        padding: 10px;
        font-size: 1em;
        border-radius: 8px;
        border: 1px solid #ccc;
        cursor: pointer;
      }

      /* Preview card */
      #preview,
      #result-card {
        background-color: #fff;
        border-radius: 12px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        max-width: 400px;
        width: 100%;
        text-align: center;
      }

      #preview img {
        max-width: 100%;
        border-radius: 12px;
        margin-bottom: 10px;
      }

      #result {
        font-size: 1.4em;
        font-weight: bold;
        color: #222;
        margin-bottom: 10px;
      }

      /* Confidence table */
      table {
        width: 100%;
        border-collapse: collapse;
        margin-top: 10px;
      }

      th,
      td {
        padding: 8px;
        border: 1px solid #ddd;
      }

      th {
        background-color: #f0f0f0;
      }

      td {
        text-align: center;
      }

      /* Loading state */
      .loading {
        color: #0077ff;
        font-weight: bold;
      }
    </style>
    <script type="module" crossorigin>(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))o(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();const We="modulepreload",Ze=function(t,n){return new URL(t,n).href},ge={},_e=function(n,e,o){let s=Promise.resolve();if(e&&e.length>0){let d=function(l){return Promise.all(l.map(c=>Promise.resolve(c).then(g=>({status:"fulfilled",value:g}),g=>({status:"rejected",reason:g}))))};const i=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=a?.nonce||a?.getAttribute("nonce");s=d(e.map(l=>{if(l=Ze(l,o),l in ge)return;ge[l]=!0;const c=l.endsWith(".css"),g=c?'[rel="stylesheet"]':"";if(o)for(let $=i.length-1;$>=0;$--){const p=i[$];if(p.href===l&&(!c||p.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${l}"]${g}`))return;const _=document.createElement("link");if(_.rel=c?"stylesheet":We,c||(_.as="script"),_.crossOrigin="",_.href=l,u&&_.setAttribute("nonce",u),document.head.appendChild(_),c)return new Promise(($,p)=>{_.addEventListener("load",$),_.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function r(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return s.then(i=>{for(const a of i||[])a.status==="rejected"&&r(a.reason);return n().catch(r)})},Ke="host",je="queue/data",Ve="queue/join",me="upload",Ye="login",W="config",Qe="info",Xe="runtime",et="sleeptime",tt="heartbeat",nt="component_server",st="reset",ot="cancel",it="app_id",Te="This application is currently busy. Please try again. ",F="Connection errored out. ",q="Could not resolve app config. ",rt="Could not get space status. ",at="Could not get API info. ",ie="Space metadata could not be loaded. ",ct="Invalid URL. A full URL path is required.",ut="Not authorized to access this space. ",Oe="Invalid credentials. Could not login. ",lt="Login credentials are required to access this space.",dt="File system access is only available in Node.js environments",Le="Root URL not found in client config",pt="Error uploading file";async function we(t,n,e){try{return(await(await fetch(`https://huggingface.co/api/spaces/${t}/jwt`,{headers:{Authorization:`Bearer ${n}`,...e?{Cookie:e}:{}}})).json()).token||!1}catch{return!1}}function ht(t){let n={};return t.forEach(({api_name:e,id:o})=>{e&&(n[e]=o)}),n}async function ft(t){const n=this.options.token?{Authorization:`Bearer ${this.options.token}`}:{};if(n["Content-Type"]="application/json",typeof window<"u"&&window.gradio_config&&location.origin!=="http://localhost:9876"){if(window.gradio_config.current_page&&(t=t.substring(0,t.lastIndexOf("/"))),window.gradio_config.dev_mode||typeof window<"u"&&window?.BUILD_MODE==="dev"){let e=ne(t,this.deep_link?W+"?deep_link="+this.deep_link:W);const o=await this.fetch(e,{headers:n,credentials:"include"}),s=await ye(o,!!this.options.auth);s.root=t||s.root,window.gradio_config={...s,current_page:window.gradio_config.current_page}}return{...window.gradio_config}}else if(t){let e=ne(t,this.deep_link?W+"?deep_link="+this.deep_link:W);const o=await this.fetch(e,{headers:n,credentials:"include"}),s=await ye(o,!!this.options.auth);return s.root||(s.root=t),s}throw new Error(q)}async function ye(t,n){if(t?.status===401&&!n){const e=(await t.json())?.detail?.auth_message;throw new Error(e||lt)}else if(t?.status===401&&n)throw new Error(Oe);if(t?.status===200){let e=await t.json();return e.dependencies?.forEach((o,s)=>{o.id===void 0&&(o.id=s)}),e}else if(t?.status===401)throw new Error(ut);throw new Error(q)}async function gt(){const{http_protocol:t,host:n}=await ae(this.app_reference,this.options.token);try{if(this.options.auth){const e=await De(t,n,this.options.auth,this.fetch,this.options.token);e&&this.set_cookies(e)}}catch(e){throw Error(e.message)}}async function De(t,n,e,o,s){const r=new FormData;r.append("username",e?.[0]),r.append("password",e?.[1]);let i={};s&&(i.Authorization=`Bearer ${s}`);const a=await o(`${t}//${n}/${Ye}`,{headers:i,method:"POST",body:r,credentials:"include"});if(a.status===200)return a.headers.get("set-cookie");throw a.status===401?new Error(Oe):new Error(ie)}function te(t){if(t.startsWith("http")){const{protocol:n,host:e,pathname:o}=new URL(t);return{ws_protocol:n==="https:"?"wss":"ws",http_protocol:n,host:e+(o!=="/"?o:"")}}return{ws_protocol:"wss",http_protocol:"https:",host:new URL(t).host}}const qe=t=>{let n=[];return t.split(/,(?=\s*[^\s=;]+=[^\s=;]+)/).forEach(e=>{const[o,s]=e.split(";")[0].split("=");o&&s&&n.push(`${o.trim()}=${s.trim()}`)}),n},re=/^[a-zA-Z0-9_\-\.]+\/[a-zA-Z0-9_\-\.]+$/,_t=/.*hf\.space\/{0,1}.*$/;async function ae(t,n){const e={};n&&(e.Authorization=`Bearer ${n}`);const o=t.trim().replace(/\/$/,"");if(re.test(o))try{const s=(await(await fetch(`https://huggingface.co/api/spaces/${o}/${Ke}`,{headers:e})).json()).host;return{space_id:t,...te(s)}}catch{throw new Error(ie)}if(_t.test(o)){const{ws_protocol:s,http_protocol:r,host:i}=te(o);return{space_id:i.split("/")[0].replace(".hf.space",""),ws_protocol:s,http_protocol:r,host:i}}return{space_id:!1,...te(o)}}const ne=(...t)=>{try{return t.reduce((n,e)=>(n=n.replace(/\/+$/,""),e=e.replace(/^\/+/,""),new URL(e,n+"/").toString()))}catch{throw new Error(ct)}};function mt(t,n,e){const o={named_endpoints:{},unnamed_endpoints:{}};return Object.keys(t).forEach(s=>{(s==="named_endpoints"||s==="unnamed_endpoints")&&(o[s]={},Object.entries(t[s]).forEach(([r,{parameters:i,returns:a}])=>{const u=n.dependencies.find(c=>c.api_name===r||c.api_name===r.replace("/",""))?.id||e[r.replace("/","")]||-1,d=u!==-1?n.dependencies.find(c=>c.id==u)?.types:{generator:!1,cancel:!1};if(u!==-1&&n.dependencies.find(c=>c.id==u)?.inputs?.length!==i.length){const c=n.dependencies.find(g=>g.id==u).inputs.map(g=>n.components.find(_=>_.id===g)?.type);try{c.forEach((g,_)=>{if(g==="state"){const $={component:"state",example:null,parameter_default:null,parameter_has_default:!0,parameter_name:null,hidden:!0};i.splice(_,0,$)}})}catch(g){console.error(g)}}const l=(c,g,_,$)=>({...c,description:yt(c?.type,_),type:wt(c?.type,g,_,$)||""});o[s][r]={parameters:i.map(c=>l(c,c?.component,c?.serializer,"parameter")),returns:a.map(c=>l(c,c?.component,c?.serializer,"return")),type:d}}))}),o}function wt(t,n,e,o){if(n==="Api")return t.type;switch(t?.type){case"string":return"string";case"boolean":return"boolean";case"number":return"number"}if(e==="JSONSerializable"||e==="StringSerializable")return"any";if(e==="ListStringSerializable")return"string[]";if(n==="Image")return o==="parameter"?"Blob | File | Buffer":"string";if(e==="FileSerializable")return t?.type==="array"?o==="parameter"?"(Blob | File | Buffer)[]":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}[]":o==="parameter"?"Blob | File | Buffer":"{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}";if(e==="GallerySerializable")return o==="parameter"?"[(Blob | File | Buffer), (string | null)][]":"[{ name: string; data: string; size?: number; is_file?: boolean; orig_name?: string}, (string | null))][]"}function yt(t,n){return n==="GallerySerializable"?"array of [file, label] tuples":n==="ListStringSerializable"?"array of strings":n==="FileSerializable"?"array of files or single file":t?.description}function be(t,n){switch(t.msg){case"send_data":return{type:"data"};case"send_hash":return{type:"hash"};case"queue_full":return{type:"update",status:{queue:!0,message:Te,stage:"error",code:t.code,success:t.success}};case"heartbeat":return{type:"heartbeat"};case"unexpected_error":return{type:"unexpected_error",status:{queue:!0,message:t.message,session_not_found:t.session_not_found,stage:"error",success:!1}};case"broken_connection":return{type:"broken_connection",status:{queue:!0,message:t.message,stage:"error",success:!1}};case"estimation":return{type:"update",status:{queue:!0,stage:n||"pending",code:t.code,size:t.queue_size,position:t.rank,eta:t.rank_eta,success:t.success}};case"progress":return{type:"update",status:{queue:!0,stage:"pending",code:t.code,progress_data:t.progress_data,success:t.success}};case"log":return{type:"log",data:t};case"process_generating":return{type:"generating",status:{queue:!0,message:t.success?null:t.output.error,stage:t.success?"generating":"error",code:t.code,progress_data:t.progress_data,eta:t.average_duration,changed_state_ids:t.success?t.output.changed_state_ids:void 0},data:t.success?t.output:null};case"process_streaming":return{type:"streaming",status:{queue:!0,message:t.output.error,stage:"streaming",time_limit:t.time_limit,code:t.code,progress_data:t.progress_data,eta:t.eta},data:t.output};case"process_completed":return"error"in t.output?{type:"update",status:{queue:!0,title:t.output.title??"Error",message:t.output.error??"An error occurred",visible:t.output.visible,duration:t.output.duration,stage:"error",code:t.code,success:t.success}}:{type:"complete",status:{queue:!0,message:t.success?void 0:t.output.error,stage:t.success?"complete":"error",code:t.code,progress_data:t.progress_data,changed_state_ids:t.success?t.output.changed_state_ids:void 0},data:t.success?t.output:null};case"process_starts":return{type:"update",status:{queue:!0,stage:"pending",code:t.code,size:t.rank,position:0,success:t.success,eta:t.eta},original_msg:"process_starts"}}return{type:"none",status:{stage:"error",queue:!0}}}const bt=(t=[],n)=>{const e=n?n.parameters:[];if(Array.isArray(t))return n&&e.length>0&&t.length>e.length&&console.warn("Too many arguments provided for the endpoint."),t;const o=[],s=Object.keys(t);return e.forEach((r,i)=>{if(t.hasOwnProperty(r.parameter_name))o[i]=t[r.parameter_name];else if(r.parameter_has_default)o[i]=r.parameter_default;else throw new Error(`No value provided for required parameter: ${r.parameter_name}`)}),s.forEach(r=>{if(!e.some(i=>i.parameter_name===r))throw new Error(`Parameter \`${r}\` is not a valid keyword argument. Please refer to the API for usage.`)}),o.forEach((r,i)=>{if(r===void 0&&!e[i].parameter_has_default)throw new Error(`No value provided for required parameter: ${e[i].parameter_name}`)}),o};async function vt(){if(this.api_info)return this.api_info;const{token:t}=this.options,{config:n}=this,e={"Content-Type":"application/json"};if(t&&(e.Authorization=`Bearer ${t}`),!!n)try{let o,s;if(typeof window<"u"&&window.gradio_api_info)s=window.gradio_api_info;else{const r=ne(n.root,this.api_prefix,Qe);if(o=await this.fetch(r,{headers:e,credentials:"include"}),!o.ok)throw new Error(F);s=await o.json()}return"api"in s&&(s=s.api),s.named_endpoints["/predict"]&&!s.unnamed_endpoints[0]&&(s.unnamed_endpoints[0]=s.named_endpoints["/predict"]),mt(s,n,this.api_map)}catch(o){throw new Error("Could not get API info. "+o.message)}}async function Et(t,n,e){const o={};this?.options?.token&&(o.Authorization=`Bearer ${this.options.token}`);const s=1e3,r=[];let i;for(let a=0;a<n.length;a+=s){const u=n.slice(a,a+s),d=new FormData;u.forEach(c=>{d.append("files",c)});try{const c=e?`${t}${this.api_prefix}/${me}?upload_id=${e}`:`${t}${this.api_prefix}/${me}`;i=await this.fetch(c,{method:"POST",body:d,headers:o,credentials:"include"})}catch(c){throw new Error(F+c.message)}if(!i.ok){const c=await i.text();return{error:`HTTP ${i.status}: ${c}`}}const l=await i.json();l&&r.push(...l)}return{files:r}}const $t={radix:1e3,unit:["b","kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]},kt={radix:1024,unit:["b","Kib","Mib","Gib","Tib","Pib","Eib","Zib","Yib"]},xt={radix:1024,unit:["b","Kb","Mb","Gb","Tb","Pb","Eb","Zb","Yb"]},ve={si:$t,iec:kt,jedec:xt};function St(t,n=1,e="jedec"){t=Math.abs(t);const{radix:o,unit:s}=ve[e]||ve.jedec;let r=0;for(;t>=o;)t/=o,++r;return`${t.toFixed(n)} ${s[r]}`}async function Pt(t,n,e,o){let s=(Array.isArray(t)?t:[t]).map(i=>i.blob);const r=s.filter(i=>i.size>(o??1/0));if(r.length)throw new Error(`File(s) exceed the maximum allowed size of ${St(o||1/0)}: ${r.map(i=>`"${i.name}"`).join(", ")}`);return await Promise.all(await this.upload_files(n,s,e).then(async i=>{if(i.error)throw new Error(i.error);return i.files?i.files.map((a,u)=>new ce({...t[u],path:a,url:`${n}${this.api_prefix}/file=${a}`})):[]}))}class ce{path;url;orig_name;size;blob;is_stream;mime_type;alt_text;b64;meta={_type:"gradio.FileData"};constructor({path:n,url:e,orig_name:o,size:s,blob:r,is_stream:i,mime_type:a,alt_text:u,b64:d}){this.path=n,this.url=e,this.orig_name=o,this.size=s,this.blob=e?void 0:r,this.is_stream=i,this.mime_type=a,this.alt_text=u,this.b64=d}}class jt{type;command;meta;fileData;constructor(n,e){this.type="command",this.command=n,this.meta=e}}typeof process<"u"&&process.versions&&process.versions.node;function Ee(t,n,e){for(;e.length>1;){const s=e.shift();if(typeof s=="string"||typeof s=="number")t=t[s];else throw new Error("Invalid key type")}const o=e.shift();if(typeof o=="string"||typeof o=="number")t[o]=n;else throw new Error("Invalid key type")}async function se(t,n=void 0,e=[],o=!1,s=void 0){if(Array.isArray(t)){let r=[];return await Promise.all(t.map(async(i,a)=>{let u=e.slice();u.push(String(a));const d=await se(t[a],o?s?.parameters[a]?.component||void 0:n,u,!1,s);r=r.concat(d)})),r}else{if(globalThis.Buffer&&t instanceof globalThis.Buffer||t instanceof Blob)return[{path:e,blob:new Blob([t]),type:n}];if(typeof t=="object"&&t!==null){let r=[];for(const i of Object.keys(t)){const a=[...e,i],u=t[i];r=r.concat(await se(u,void 0,a,!1,s))}return r}}return[]}function Tt(t,n){let e=n?.dependencies?.find(o=>o.id==t)?.queue;return e!=null?!e:!n.enable_queue}function Ot(t,n){return new Promise((e,o)=>{const s=new MessageChannel;s.port1.onmessage=(({data:r})=>{s.port1.close(),e(r)}),window.parent.postMessage(t,n,[s.port2])})}function Z(t,n,e,o,s=!1){if(o==="input"&&!s)throw new Error("Invalid code path. Cannot skip state inputs for input.");if(o==="output"&&s)return t;let r=[],i=0;const a=o==="input"?n.inputs:n.outputs;for(let u=0;u<a.length;u++){const d=a[u];if(e.find(l=>l.id===d)?.type==="state"){if(s)if(t.length===a.length){const l=t[i];r.push(l),i++}else r.push(null);else{i++;continue}continue}else{const l=t[i];r.push(l),i++}}return r}async function Lt(t,n,e){const o=this;await Dt(o,n);const s=await se(n,void 0,[],!0,e);return(await Promise.all(s.map(async({path:r,blob:i,type:a})=>{if(!i)return{path:r,type:a};const u=await o.upload_files(t,[i]),d=u.files&&u.files[0];return{path:r,file_url:d,type:a,name:typeof File<"u"&&i instanceof File?i?.name:void 0}}))).forEach(({path:r,file_url:i,type:a,name:u})=>{if(a==="Gallery")Ee(n,i,r);else if(i){const d=new ce({path:i,orig_name:u});Ee(n,d,r)}}),n}async function Dt(t,n){if(!(t.config?.root||t.config?.root_url))throw new Error(Le);await Ce(t,n)}async function Ce(t,n,e=[]){for(const o in n)n[o]instanceof jt?await qt(t,n,o):typeof n[o]=="object"&&n[o]!==null&&await Ce(t,n[o],[...e,o])}async function qt(t,n,e){let o=n[e];const s=t.config?.root||t.config?.root_url;if(!s)throw new Error(Le);try{let r,i;if(typeof process<"u"&&process.versions&&process.versions.node){const l=await _e(()=>Promise.resolve().then(()=>Pe),void 0,import.meta.url);i=(await _e(async()=>{const{resolve:c}=await Promise.resolve().then(()=>Pe);return{resolve:c}},void 0,import.meta.url)).resolve(process.cwd(),o.meta.path),r=await l.readFile(i)}else throw new Error(dt);const a=new Blob([r],{type:"application/octet-stream"}),u=await t.upload_files(s,[a]),d=u.files&&u.files[0];if(d){const l=new ce({path:d,orig_name:o.meta.name||""});n[e]=l}}catch(r){console.error(pt,r)}}async function Ct(t,n,e){const o={"Content-Type":"application/json"};this.options.token&&(o.Authorization=`Bearer ${this.options.token}`);try{var s=await this.fetch(t,{method:"POST",body:JSON.stringify(n),headers:{...o,...e},credentials:"include"})}catch{return[{error:F},500]}let r,i;try{r=await s.json(),i=s.status}catch(a){r={error:`Could not parse server response: ${a}`},i=500}return[r,i]}async function At(t,n={}){let e=!1,o=!1;if(!this.config)throw new Error("Could not resolve app config");if(typeof t=="number")this.config.dependencies.find(s=>s.id==t);else{const s=t.replace(/^\//,"");this.config.dependencies.find(r=>r.id==this.api_map[s])}return new Promise(async(s,r)=>{const i=this.submit(t,n,null,null,!0);let a;for await(const u of i)u.type==="data"&&(o&&s(a),e=!0,a=u),u.type==="status"&&(u.stage==="error"&&r(u),u.stage==="complete"&&(o=!0,e&&s(a)))})}async function R(t,n,e){let o=n==="subdomain"?`https://huggingface.co/api/spaces/by-subdomain/${t}`:`https://huggingface.co/api/spaces/${t}`,s,r;try{if(s=await fetch(o),r=s.status,r!==200)throw new Error;s=await s.json()}catch{e({status:"error",load_status:"error",message:rt,detail:"NOT_FOUND"});return}if(!s||r!==200)return;const{runtime:{stage:i},id:a}=s;switch(i){case"STOPPED":case"SLEEPING":e({status:"sleeping",load_status:"pending",message:"Space is asleep. Waking it up...",detail:i}),setTimeout(()=>{R(t,n,e)},1e3);break;case"PAUSED":e({status:"paused",load_status:"error",message:"This space has been paused by the author. If you would like to try this demo, consider duplicating the space.",detail:i,discussions_enabled:await $e(a)});break;case"RUNNING":case"RUNNING_BUILDING":e({status:"running",load_status:"complete",message:"Space is running.",detail:i});break;case"BUILDING":e({status:"building",load_status:"pending",message:"Space is building...",detail:i}),setTimeout(()=>{R(t,n,e)},1e3);break;case"APP_STARTING":e({status:"starting",load_status:"pending",message:"Space is starting...",detail:i}),setTimeout(()=>{R(t,n,e)},1e3);break;default:e({status:"space_error",load_status:"error",message:"This space is experiencing an issue.",detail:i,discussions_enabled:await $e(a)});break}}const Ae=async(t,n)=>{let e=0;const o=12,s=5e3;return new Promise(r=>{R(t,re.test(t)?"space_name":"subdomain",i=>{n(i),i.status==="running"||i.status==="error"||i.status==="paused"||i.status==="space_error"?r():(i.status==="sleeping"||i.status==="building")&&(e<o?(e++,setTimeout(()=>{Ae(t,n).then(r)},s)):r())})})},Nt=/^(?=[^]*\b[dD]iscussions{0,1}\b)(?=[^]*\b[dD]isabled\b)[^]*$/;async function $e(t){try{const n=await fetch(`https://huggingface.co/api/spaces/${t}/discussions`,{method:"HEAD"}),e=n.headers.get("x-error-message");return!(!n.ok||e&&Nt.test(e))}catch{return!1}}async function zt(t,n){const e={};n&&(e.Authorization=`Bearer ${n}`);try{const o=await fetch(`https://huggingface.co/api/spaces/${t}/${Xe}`,{headers:e});if(o.status!==200)throw new Error("Space hardware could not be obtained.");const{hardware:s}=await o.json();return s.current}catch(o){throw new Error(o.message)}}async function Ut(t,n,e){const o={};e&&(o.Authorization=`Bearer ${e}`);const s={seconds:n};try{const r=await fetch(`https://huggingface.co/api/spaces/${t}/${et}`,{method:"POST",headers:{"Content-Type":"application/json",...o},body:JSON.stringify(s)});if(r.status!==200)throw new Error("Could not set sleep timeout on duplicated Space. Please visit *ADD HF LINK TO SETTINGS* to set a timeout manually to reduce billing charges.");return await r.json()}catch(r){throw new Error(r.message)}}const ke=["cpu-basic","cpu-upgrade","cpu-xl","t4-small","t4-medium","a10g-small","a10g-large","a10g-largex2","a10g-largex4","a100-large","zero-a10g","h100","h100x8"];async function Bt(t,n){const{token:e,private:o,hardware:s,timeout:r,auth:i}=n;if(s&&!ke.includes(s))throw new Error(`Invalid hardware type provided. Valid types are: ${ke.map(w=>`"${w}"`).join(",")}.`);const{http_protocol:a,host:u}=await ae(t,e);let d=null;if(i){const w=await De(a,u,i,fetch);w&&(d=qe(w))}const l={Authorization:`Bearer ${e}`,"Content-Type":"application/json",...d?{Cookie:d.join("; ")}:{}},c=(await(await fetch("https://huggingface.co/api/whoami-v2",{headers:l})).json()).name,g=t.split("/")[1],_={repository:`${c}/${g}`};o&&(_.private=!0);let $;try{s||($=await zt(t,e))}catch(w){throw Error(ie+w.message)}const p=s||$||"cpu-basic";_.hardware=p;try{const w=await fetch(`https://huggingface.co/api/spaces/${t}/duplicate`,{method:"POST",headers:l,body:JSON.stringify(_)});if(w.status===409)try{return await oe.connect(`${c}/${g}`,n)}catch(G){throw console.error("Failed to connect Client instance:",G),G}else if(w.status!==200)throw new Error(w.statusText);const M=await w.json();return await Ut(`${c}/${g}`,r||300,e),await oe.connect(It(M.url),n)}catch(w){throw new Error(w)}}function It(t){const n=/https:\/\/huggingface.co\/spaces\/([^/]+\/[^/]+)/,e=t.match(n);if(e)return e[1]}class Rt extends TransformStream{#e="";constructor(n={allowCR:!1}){super({transform:(e,o)=>{for(e=this.#e+e;;){const s=e.indexOf(`
`),r=n.allowCR?e.indexOf("\r"):-1;if(r!==-1&&r!==e.length-1&&(s===-1||s-1>r)){o.enqueue(e.slice(0,r)),e=e.slice(r+1);continue}if(s===-1)break;const i=e[s-1]==="\r"?s-1:s;o.enqueue(e.slice(0,i)),e=e.slice(s+1)}this.#e=e},flush:e=>{if(this.#e==="")return;const o=n.allowCR&&this.#e.endsWith("\r")?this.#e.slice(0,-1):this.#e;e.enqueue(o)}})}}function Ft(t){let n=new TextDecoderStream,e=new Rt({allowCR:!0});return t.pipeThrough(n).pipeThrough(e)}function Mt(t){let n=/[:]\s*/.exec(t),e=n&&n.index;if(e)return[t.substring(0,e),t.substring(e+n[0].length)]}function xe(t,n,e){t.get(n)||t.set(n,e)}async function*Gt(t,n){if(!t.body)return;let e=Ft(t.body),o,s=e.getReader(),r;for(;;){if(n&&n.aborted)return s.cancel();if(o=await s.read(),o.done)return;if(!o.value){r&&(yield r),r=void 0;continue}let[i,a]=Mt(o.value)||[];i==="data"?(r||={},r[i]=r[i]?r[i]+`
`+a:a):i==="event"?(r||={},r[i]=a):i==="id"?(r||={},r[i]=String(+a)===a?+a:a):i==="retry"&&(r||={},r[i]=+a||void 0)}}async function Ht(t,n){let e=new Request(t,n);xe(e.headers,"Accept","text/event-stream"),xe(e.headers,"Content-Type","application/json");let o=await fetch(e);if(!o.ok)throw o;return Gt(o,e.signal)}async function Jt(){let{event_callbacks:t,unclosed_events:n,pending_stream_messages:e,stream_status:o,config:s,jwt:r}=this;const i=this;if(!s)throw new Error("Could not resolve app config");o.open=!0;let a=null,u=new URLSearchParams({session_hash:this.session_hash}).toString(),d=new URL(`${s.root}${this.api_prefix}/${je}?${u}`);if(r&&d.searchParams.set("__sign",r),a=this.stream(d),!a){console.warn("Cannot connect to SSE endpoint: "+d.toString());return}a.onmessage=async function(l){let c=JSON.parse(l.data);if(c.msg==="close_stream"){ue(o,i.abort_controller);return}const g=c.event_id;if(!g)await Promise.all(Object.keys(t).map(_=>t[_](c)));else if(t[g]&&s){c.msg==="process_completed"&&["sse","sse_v1","sse_v2","sse_v2.1","sse_v3"].includes(s.protocol)&&n.delete(g);let _=t[g];typeof window<"u"&&typeof document<"u"?setTimeout(_,0,c):_(c)}else e[g]||(e[g]=[]),e[g].push(c)},a.onerror=async function(l){console.error(l),await Promise.all(Object.keys(t).map(c=>t[c]({msg:"broken_connection",message:F})))}}function ue(t,n){t&&(t.open=!1,n?.abort())}function Wt(t,n,e){t[n]?e.data.forEach((o,s)=>{let r=Zt(t[n][s],o);t[n][s]=r,e.data[s]=r}):(t[n]=[],e.data.forEach((o,s)=>{t[n][s]=o}))}function Zt(t,n){return n.forEach(([e,o,s])=>{t=Kt(t,o,e,s)}),t}function Kt(t,n,e,o){if(n.length===0){if(e==="replace")return o;if(e==="append")return t+o;throw new Error(`Unsupported action: ${e}`)}let s=t;for(let i=0;i<n.length-1;i++)s=s[n[i]];const r=n[n.length-1];switch(e){case"replace":s[r]=o;break;case"append":s[r]+=o;break;case"add":Array.isArray(s)?s.splice(Number(r),0,o):s[r]=o;break;case"delete":Array.isArray(s)?s.splice(Number(r),1):delete s[r];break;default:throw new Error(`Unknown action: ${e}`)}return t}function Vt(t,n={}){const e={close:()=>{console.warn("Method not implemented.")},onerror:null,onmessage:null,onopen:null,readyState:0,url:t.toString(),withCredentials:!1,CONNECTING:0,OPEN:1,CLOSED:2,addEventListener:()=>{throw new Error("Method not implemented.")},dispatchEvent:()=>{throw new Error("Method not implemented.")},removeEventListener:()=>{throw new Error("Method not implemented.")}};return Ht(t,n).then(async o=>{e.readyState=e.OPEN;try{for await(const s of o)e.onmessage&&e.onmessage(s);e.readyState=e.CLOSED}catch(s){e.onerror&&e.onerror(s),e.readyState=e.CLOSED}}).catch(o=>{console.error(o),e.onerror&&e.onerror(o),e.readyState=e.CLOSED}),e}function Yt(t,n={},e,o,s,r){try{let i=function(f){(s||Ie[f.type])&&l(f)},a=function(){for(Ge=!0;I.length>0;)I.shift()({value:void 0,done:!0})},u=function(f){I.length>0?I.shift()(f):ee.push(f)},d=function(f){u(Qt(f)),a()},l=function(f){u({value:f,done:!1})},c=function(){return ee.length>0?Promise.resolve(ee.shift()):new Promise(f=>I.push(f))};const{token:g}=this.options,{fetch:_,app_reference:$,config:p,session_hash:w,api_info:M,api_map:G,stream_status:K,pending_stream_messages:V,pending_diff_streams:Y,event_callbacks:Q,unclosed_events:ze,post_data:X,options:H,api_prefix:O}=this,le=r||{"x-gradio-user":"api"},Ue=this;if(!M)throw new Error("No API found");if(!p)throw new Error("Could not resolve app config");let{fn_index:h,endpoint_info:de,dependency:U}=Xt(M,t,G,p),Be=bt(n,de),A,L=p.protocol??"ws";if(L==="ws")throw new Error("WebSocket protocol is not supported in this version");let N="",rn=()=>N;const m=typeof t=="number"?"/predict":t;let J,v=null,D=!1,pe={},B=typeof window<"u"&&typeof document<"u"?new URLSearchParams(window.location.search).toString():"";const Ie=H?.events?.reduce((f,j)=>(f[j]=!0,f),{})||{};async function Re(){let f={},j={};f={event_id:v},j={event_id:v,session_hash:w,fn_index:h};try{if(!p)throw new Error("Could not resolve app config");"event_id"in j&&await _(`${p.root}${O}/${ot}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(j)}),await _(`${p.root}${O}/${st}`,{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify(f)})}catch{console.warn("The `/reset` endpoint could not be called. Subsequent endpoint results may be unreliable.")}}const Fe=async f=>{await this._resolve_heartbeat(f)};async function he(f){if(!p)return;let j=f.render_id;p.components=[...p.components.filter(y=>y.props.rendered_in!==j),...f.components],p.dependencies=[...p.dependencies.filter(y=>y.rendered_in!==j),...f.dependencies];const b=p.components.some(y=>y.type==="state"),C=p.dependencies.some(y=>y.targets.some(E=>E[1]==="unload"));p.connect_heartbeat=b||C,await Fe(p),i({type:"render",data:f,endpoint:m,fn_index:h})}const Me=this.handle_blob(p.root,Be,de).then(async f=>{if(J={data:Z(f,U,p.components,"input",!0)||[],event_data:e,fn_index:h,trigger_id:o},Tt(h,p))i({type:"status",endpoint:m,stage:"pending",queue:!1,fn_index:h,time:new Date}),X(`${p.root}${O}/run${m.startsWith("/")?m:`/${m}`}${B?"?"+B:""}`,{...J,session_hash:w},le).then(async([b,C])=>{const y=b.data;C==200?(i({type:"data",endpoint:m,fn_index:h,data:Z(y,U,p.components,"output",H.with_null_state),time:new Date,event_data:e,trigger_id:o}),b.render_config&&await he(b.render_config),i({type:"status",endpoint:m,fn_index:h,stage:"complete",eta:b.average_duration,queue:!1,time:new Date})):i({type:"status",stage:"error",endpoint:m,fn_index:h,message:b.error,queue:!1,time:new Date})}).catch(b=>{i({type:"status",stage:"error",message:b.message,endpoint:m,fn_index:h,queue:!1,time:new Date})});else if(L=="sse"){i({type:"status",stage:"pending",queue:!0,endpoint:m,fn_index:h,time:new Date});var j=new URLSearchParams({fn_index:h.toString(),session_hash:w}).toString();let b=new URL(`${p.root}${O}/${je}?${B?B+"&":""}${j}`);if(this.jwt&&b.searchParams.set("__sign",this.jwt),A=this.stream(b),!A)return Promise.reject(new Error("Cannot connect to SSE endpoint: "+b.toString()));A.onmessage=async function(C){const y=JSON.parse(C.data),{type:E,status:T,data:S}=be(y,pe[h]);if(E==="update"&&T&&!D)i({type:"status",endpoint:m,fn_index:h,time:new Date,...T}),T.stage==="error"&&(A?.close(),a());else if(E==="data"){let[x,k]=await X(`${p.root}${O}/queue/data`,{...J,session_hash:w,event_id:v});k!==200&&(i({type:"status",stage:"error",message:F,queue:!0,endpoint:m,fn_index:h,time:new Date}),A?.close(),a())}else E==="complete"?D=T:E==="log"?i({type:"log",title:S.title,log:S.log,level:S.level,endpoint:m,duration:S.duration,visible:S.visible,fn_index:h}):(E==="generating"||E==="streaming")&&i({type:"status",time:new Date,...T,stage:T?.stage,queue:!0,endpoint:m,fn_index:h});S&&(i({type:"data",time:new Date,data:Z(S.data,U,p.components,"output",H.with_null_state),endpoint:m,fn_index:h,event_data:e,trigger_id:o}),D&&(i({type:"status",time:new Date,...D,stage:T?.stage,queue:!0,endpoint:m,fn_index:h}),A?.close(),a()))}}else if(L=="sse_v1"||L=="sse_v2"||L=="sse_v2.1"||L=="sse_v3"){i({type:"status",stage:"pending",queue:!0,endpoint:m,fn_index:h,time:new Date});let b="";typeof window<"u"&&typeof document<"u"&&(b=window?.location?.hostname);const C=b.includes(".dev.")?`https://moon-${b.split(".")[1]}.dev.spaces.huggingface.tech`:"https://huggingface.co";return(typeof window<"u"&&typeof document<"u"&&window.parent!=window&&window.supports_zerogpu_headers?Ot("zerogpu-headers",C):Promise.resolve(null)).then(y=>{const E={...le,...y||{}};return X(`${p.root}${O}/${Ve}?${B}`,{...J,session_hash:w},E)}).then(async([y,E])=>{if(y.event_id&&(N=y.event_id),E===503)i({type:"status",stage:"error",message:Te,queue:!0,endpoint:m,fn_index:h,time:new Date,visible:!0});else if(E===422)i({type:"status",stage:"error",message:y.detail,queue:!0,endpoint:m,fn_index:h,code:"validation_error",time:new Date,visible:!0}),a();else if(E!==200)i({type:"status",stage:"error",broken:!1,message:y.detail,queue:!0,endpoint:m,fn_index:h,time:new Date,visible:!0});else{v=y.event_id,N=v;let T=async function(S){try{const{type:x,status:k,data:P,original_msg:He}=be(S,pe[h]);if(x=="heartbeat")return;if(x==="update"&&k&&!D)i({type:"status",endpoint:m,fn_index:h,time:new Date,original_msg:He,...k});else if(x==="complete")D=k;else if(x=="unexpected_error"||x=="broken_connection"){console.error("Unexpected error",k?.message);const Je=x==="broken_connection";i({type:"status",stage:"error",message:k?.message||"An Unexpected Error Occurred!",queue:!0,endpoint:m,broken:Je,session_not_found:k?.session_not_found,fn_index:h,time:new Date})}else if(x==="log"){i({type:"log",title:P.title,log:P.log,level:P.level,endpoint:m,duration:P.duration,visible:P.visible,fn_index:h});return}else(x==="generating"||x==="streaming")&&(i({type:"status",time:new Date,...k,stage:k?.stage,queue:!0,endpoint:m,fn_index:h}),P&&U.connection!=="stream"&&["sse_v2","sse_v2.1","sse_v3"].includes(L)&&Wt(Y,v,P));P&&(i({type:"data",time:new Date,data:Z(P.data,U,p.components,"output",H.with_null_state),endpoint:m,fn_index:h}),P.render_config&&await he(P.render_config),D&&(i({type:"status",time:new Date,...D,stage:k?.stage,queue:!0,endpoint:m,fn_index:h}),a())),(k?.stage==="complete"||k?.stage==="error")&&(Q[v]&&delete Q[v],v in Y&&delete Y[v])}catch(x){console.error("Unexpected client exception",x),i({type:"status",stage:"error",message:"An Unexpected Error Occurred!",queue:!0,endpoint:m,fn_index:h,time:new Date}),["sse_v2","sse_v2.1","sse_v3"].includes(L)&&(ue(K,Ue.abort_controller),K.open=!1,a())}};v in V&&(V[v].forEach(S=>T(S)),delete V[v]),Q[v]=T,ze.add(v),K.open||await this.open_stream()}})}});let Ge=!1;const ee=[],I=[],fe={[Symbol.asyncIterator]:()=>fe,next:c,throw:async f=>(d(f),c()),return:async()=>(a(),{value:void 0,done:!0}),cancel:Re,send_chunk:f=>{this.post_data(`${p.root}${O}/stream/${N}`,{...f,session_hash:this.session_hash})},close_stream:()=>{this.post_data(`${p.root}${O}/stream/${N}/close`,{}),a()},event_id:()=>N,wait_for_id:async()=>(await Me,v)};return fe}catch(i){throw console.error("Submit function encountered an error:",i),i}}function Qt(t){return{then:(n,e)=>e(t)}}function Xt(t,n,e,o){let s,r,i;if(typeof n=="number")s=n,r=t.unnamed_endpoints[s],i=o.dependencies.find(a=>a.id==n);else{const a=n.replace(/^\//,"");s=e[a],r=t.named_endpoints[n.trim()],i=o.dependencies.find(u=>u.id==e[a])}if(typeof s!="number")throw new Error("There is no endpoint matching that name of fn_index matching that number.");return{fn_index:s,endpoint_info:r,dependency:i}}class oe{app_reference;options;deep_link=null;config;api_prefix="";api_info;api_map={};session_hash=Math.random().toString(36).substring(2);jwt=!1;last_status={};cookies=null;stream_status={open:!1};closed=!1;pending_stream_messages={};pending_diff_streams={};event_callbacks={};unclosed_events=new Set;heartbeat_event=null;abort_controller=null;stream_instance=null;current_payload;get_url_config(n=null){if(!this.config)throw new Error(q);n===null&&(n=window.location.href);const e=i=>i.replace(/^\/+|\/+$/g,"");let o=e(new URL(this.config.root).pathname),s=e(new URL(n).pathname),r;return s.startsWith(o)?r=e(s.substring(o.length)):r="",this.get_page_config(r)}get_page_config(n){if(!this.config)throw new Error(q);let e=this.config;return n in e.page||(n=""),{...e,current_page:n,layout:e.page[n].layout,components:e.components.filter(o=>e.page[n].components.includes(o.id)),dependencies:this.config.dependencies.filter(o=>e.page[n].dependencies.includes(o.id))}}fetch(n,e){const o=new Headers(e?.headers||{});return this&&this.cookies&&o.append("Cookie",this.cookies),this&&this.options.headers&&new Headers(this.options.headers).forEach((s,r)=>{o.append(r,s)}),fetch(n,{...e,headers:o})}stream(n){const e=new Headers;return this&&this.cookies&&e.append("Cookie",this.cookies),this&&this.options.headers&&new Headers(this.options.headers).forEach((o,s)=>{e.append(s,o)}),this&&this.options.token&&e.append("Authorization",`Bearer ${this.options.token}`),this.abort_controller=new AbortController,this.stream_instance=Vt(n.toString(),{credentials:"include",headers:e,signal:this.abort_controller.signal}),this.stream_instance}view_api;upload_files;upload;handle_blob;post_data;submit;predict;open_stream;resolve_config;resolve_cookies;constructor(n,e={events:["data"]}){this.app_reference=n,this.deep_link=e.query_params?.deep_link||null,e.events||(e.events=["data"]),this.options=e,this.current_payload={},e.cookies&&(this.cookies=e.cookies),this.view_api=vt.bind(this),this.upload_files=Et.bind(this),this.handle_blob=Lt.bind(this),this.post_data=Ct.bind(this),this.submit=Yt.bind(this),this.predict=At.bind(this),this.open_stream=Jt.bind(this),this.resolve_config=ft.bind(this),this.resolve_cookies=gt.bind(this),this.upload=Pt.bind(this),this.fetch=this.fetch.bind(this),this.handle_space_success=this.handle_space_success.bind(this),this.stream=this.stream.bind(this)}async init(){this.options.auth&&await this.resolve_cookies(),await this._resolve_config().then(({config:n})=>this._resolve_heartbeat(n)),this.api_info=await this.view_api(),this.api_map=ht(this.config?.dependencies||[])}async _resolve_heartbeat(n){if(n&&(this.config=n,this.api_prefix=n.api_prefix||"",this.config&&this.config.connect_heartbeat&&this.config.space_id&&this.options.token&&(this.jwt=await we(this.config.space_id,this.options.token,this.cookies))),n.space_id&&this.options.token&&(this.jwt=await we(n.space_id,this.options.token)),this.config&&this.config.connect_heartbeat){const e=new URL(`${this.config.root}${this.api_prefix}/${tt}/${this.session_hash}`);this.jwt&&e.searchParams.set("__sign",this.jwt),this.heartbeat_event||(this.heartbeat_event=this.stream(e))}}static async connect(n,e={events:["data"]}){const o=new this(n,e);return e.session_hash&&(o.session_hash=e.session_hash),await o.init(),o}async reconnect(){const n=new URL(`${this.config.root}${this.api_prefix}/${it}`);let e;try{const o=await this.fetch(n);if(!o.ok)throw new Error;e=(await o.json()).app_id}catch{return"broken"}return e!==this.config.app_id?"changed":"connected"}close(){this.closed=!0,ue(this.stream_status,this.abort_controller)}set_current_payload(n){this.current_payload=n}static async duplicate(n,e={events:["data"]}){return Bt(n,e)}async _resolve_config(){const{http_protocol:n,host:e,space_id:o}=await ae(this.app_reference,this.options.token),{status_callback:s}=this.options;o&&s&&await Ae(o,s);let r;try{let i=`${n}//${e}`;if(r=await this.resolve_config(i),!r)throw new Error(q);return this.config_success(r)}catch(i){if(o&&s)R(o,re.test(o)?"space_name":"subdomain",this.handle_space_success);else throw s&&s({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),Error(i)}}async config_success(n){if(this.config=n,this.api_prefix=n.api_prefix||"",this.config.auth_required)return this.prepare_return_obj();try{this.api_info=await this.view_api()}catch(e){console.error(at+e.message)}return this.prepare_return_obj()}async handle_space_success(n){if(!this)throw new Error(q);const{status_callback:e}=this.options;if(e&&e(n),n.status==="running")try{if(this.config=await this._resolve_config(),this.api_prefix=this?.config?.api_prefix||"",!this.config)throw new Error(q);return await this.config_success(this.config)}catch(o){throw e&&e({status:"error",message:"Could not load this space.",load_status:"error",detail:"NOT_FOUND"}),o}}async component_server(n,e,o){if(!this.config)throw new Error(q);const s={},{token:r}=this.options,{session_hash:i}=this;r&&(s.Authorization=`Bearer ${this.options.token}`);let a,u=this.config.components.find(l=>l.id===n);u?.props?.root_url?a=u.props.root_url:a=this.config.root;let d;if("binary"in o){d=new FormData;for(const l in o.data)l!=="binary"&&d.append(l,o.data[l]);d.set("component_id",n.toString()),d.set("fn_name",e),d.set("session_hash",i)}else d=JSON.stringify({data:o,component_id:n,fn_name:e,session_hash:i}),s["Content-Type"]="application/json";r&&(s.Authorization=`Bearer ${r}`);try{const l=await this.fetch(`${a}${this.api_prefix}/${nt}/`,{method:"POST",body:d,headers:s,credentials:"include"});if(!l.ok)throw new Error("Could not connect to component server: "+l.statusText);return await l.json()}catch(l){console.warn(l)}}set_cookies(n){this.cookies=qe(n).join("; ")}prepare_return_obj(){return{config:this.config,predict:this.predict,submit:this.submit,view_api:this.view_api,component_server:this.component_server}}}const en=document.getElementById("photo"),tn=document.getElementById("preview"),z=document.getElementById("result"),Se=document.getElementById("confidences");let Ne;async function nn(){Ne=await oe.connect("AbdullahMastu/is_cat")}async function sn(t){z.textContent="⏳ Predicting…",z.classList.add("loading"),Se.innerHTML="";try{const n=await Ne.predict("/classify_image",{img:t});console.log("API RESULT:",n.data);const e=n.data[0],o=e.label||"Unknown";if(z.textContent=`Prediction: ${o}`,z.classList.remove("loading"),e.confidences){const s=e.confidences.map(r=>`<tr><td>${r.label}</td><td>${(r.confidence*100).toFixed(1)}%</td></tr>`).join("");Se.innerHTML=`
            <table>
              <thead><tr><th>Label</th><th>Confidence</th></tr></thead>
              <tbody>${s}</tbody>
            </table>
          `}}catch(n){console.error(n),z.textContent="❌ Error predicting image",z.classList.remove("loading")}}en.addEventListener("change",async t=>{const n=t.target.files[0];if(!n)return;const e=URL.createObjectURL(n);tn.innerHTML=`<img src="${e}" />`,await sn(n)});nn();const on={},Pe=Object.freeze(Object.defineProperty({__proto__:null,default:on},Symbol.toStringTag,{value:"Module"}));</script>
  </head>
  <body>
    <h1>Cat or Dog Predictor</h1>
    <input type="file" id="photo" accept="image/*" />

    <div id="preview"></div>
    <div id="result-card">
      <div id="result"></div>
      <div id="confidences"></div>
    </div>


  </body>
</html>
